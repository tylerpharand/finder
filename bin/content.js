var sheet=document.createElement("style");sheet.innerHTML="\n  .finder-highlight {\n    transition: background 0.15s ease-in-out, color 0.15s ease-in-out;\n    background: #ffeb00 !important;\n    border-radius: 0.2em !important;\n    color: black !important;\n  }\n\n  .finder-highlight:focus {\n    color: black !important;\n    background: #ffeb00 !important;\n    background-color: #ffeb00 !important;\n    outline: none !important;\n    box-shadow: 0 0 0 2pt #bbab38 !important;\n  }\n\n  #finder-helper {\n    box-shadow: rgba(0,0,0,0.15) 0px 3px 10px;\n    font-weight: 500;\n    font-size: 1.5em;\n    font-family: Arial, Helvetica, sans-serif;\n    opacity: 0;\n    visibility: hidden;\n    border: 1px solid rgba(0,0,0,10%);\n    background: rgba(255, 255, 255, 0.3);\n    backdrop-filter: saturate(100%) blur(10px) brightness(2);\n    color: rgba(0, 0, 0, 0.8);\n    text-shadow: rgb(255 255 255 / 50%) 0px 0.5px 1px;\n    position: fixed;\n    z-index: 10000000;\n    bottom: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    border-radius: 1em;\n    padding: 0.8em 1em;\n    transition: opacity 0.15s ease-in-out, visibility 0.15s ease-in-out;\n  }\n",document.body.appendChild(sheet);const debounce=(e,t)=>{let i;return(...n)=>{clearTimeout(i),i=setTimeout((()=>{i=null,e(...n)}),t)}};class Finder{constructor(){this.HOTKEY="Control",this.KEY_IGNORE_LIST=["Meta","Shift","Clear"],this.FOCUSABLE_ELEMENTS_QUERY='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',this.DEBOUNCE_DELAY_MS=250,this.query="",this.highlightedElements=[],this.highlight=debounce((()=>this._highlight()),this.DEBOUNCE_DELAY_MS),this.tabIndex=0,this.initialize()}initialize(){this.registerHandlers(),this.injectHelper()}injectHelper(){const e=document.createElement("div");e.id="finder-helper",document.body.appendChild(e),this.helper=e,this.render()}registerHandlers(){document.addEventListener("keydown",(e=>"Escape"===e.key||"Backspace"===e.key&&!e.ctrlKey?(this.clearQuery(),void this.render()):"Tab"===e.key&&this.highlightedElements.length>0?(e.preventDefault(),void(e.shiftKey?this.focusNext(e):this.focusPrevious(e))):e.ctrlKey?(e.key===this.HOTKEY?this.clearQuery():"Backspace"===e.key?this.query=this.query.slice(0,-1):this.KEY_IGNORE_LIST.includes(e.key)||(this.query+=e.key),this.query.length>0?this.highlight():this.clearQuery(),void this.render()):void 0))}_highlight(){this.clearHighlights(),this.query&&(this.highlightedElements=[...document.querySelectorAll(this.FOCUSABLE_ELEMENTS_QUERY)].filter((e=>e.innerText.trim()&&e.innerText.trim().toLowerCase().includes(this.query))),this.highlightedElements.forEach((e=>e.classList.add("finder-highlight"))),this.initialFocus())}clearQuery(){this.clearHighlights(),this.query=""}clearHighlights(){this.highlightedElements.forEach((e=>{e.classList.remove("finder-highlight"),e.classList.remove("finder-focus")})),this.highlightedElements=[]}initialFocus(){this.highlightedElements[0]?.focus(),this.tabIndex=0}focusNext(){this.tabIndex-1<0?this.tabIndex=this.highlightedElements.length-1:this.tabIndex-=1,this.highlightedElements[this.tabIndex]?.focus()}focusPrevious(){this.tabIndex>=this.highlightedElements.length-1?this.tabIndex=0:this.tabIndex+=1,this.highlightedElements[this.tabIndex]?.focus()}render(){this.query?(this.helper.innerText=this.query,this.helper.style.opacity=1,this.helper.style.visibility="visible"):(this.helper.style.opacity=0,this.helper.style.visibility="hidden")}}const finder=new Finder;
